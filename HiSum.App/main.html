
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A layout example that shows off a responsive email layout.">

    <title>HiSum &ndash; Hierarchical Summary for Hacker News &ndash; Pure</title>
    

    
        <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css">


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <link rel="stylesheet" href="dist/themes/default/style.min.css" />
    <!--<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>-->
    <script src="dist/jstree.min.js"></script>
    <script type="text/javascript">
        
    </script>
    <script src="js/jsrender.js" type="text/javascript"></script>
    <script src="js/async.js"></script>
    <script type="text/javascript">
        $(function () { $('#jstree').jstree(); });
        function displayStories() {
            var stories = [];
            top100Function(100, function (error, result) {
                if (error) console.log(error);
                result.forEach(function (entry) {
                    var story = { author: entry['Author'], title: entry['StoryTitle'], text: entry['StoryText'] ? entry['StoryText'].substring(1, 100) : '', storyid: entry['StoryId'], storyurl: entry['Url'], hdnstoryid:'hdn'+entry['StoryId'] };
                    stories.push(story);
                });
            });
            render(stories);
        }

        function render(stories) {
            $("#list").html(
                $("#storyTemplate").render(stories)
            );
        }

        

        $(document).ready(function() {
            $("#btnUpdate").click(displayStories);
        });

        function clicked(item) {
            var storyidval = parseInt($(item).attr("id"));
            var childid = "hdn" + $(item).attr("id");
            var storyurl = $("#" + childid).text();
            var commentsurl = "https://news.ycombinator.com/item?id="+storyidval;
            var summary = '';
            summaryFunction(storyidval, function (error, result) {
                if (error) console.log(error);
                result.forEach(function (entry) {
                    summary += entry['Word'] + ' ' + entry['Count'] + ' ';
                });
            });
            $("#summaryDiv").html(summary);
            //var urltext = "<a onclick='return open('"+storyurl+"');' href='#'>Link</a>";
            var fullurl = '"' + storyurl + '"';
            var func = "onclick='openurl(" + fullurl + ")'";
            var urltext = "Link: <button class='primary-button pure-button' " + func + ">" + storyurl + "</button>";
            var commentsfullurl = '"'+commentsurl+'"';
            var commensfunc = "onclick='openurl(" + commentsfullurl + ")'";
            var commentsurltext = "Comments: <button class='primary-button pure-button' " + commensfunc + ">" + commentsurl + "</button>";
            console.log(urltext);
            $("#storyUrlDiv").html(urltext);
            $("#commentsUrlDiv").html(commentsurltext);
        }

        function openurl(url) {
            console.log(url);
            var gui = require('nw.gui');
            gui.Shell.openExternal(url);
        }
    </script>
    
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="css/layouts/email-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="css/layouts/email.css" >
    <!--<![endif]-->
    <!--[if lt IE 9]>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js"></script>
    <![endif]-->
    <script type="text/javascript" src="reader.js"></script>
    </head>
<body>


    

    
    

    <div id="layout" class="content pure-g">
        <div id="nav" class="pure-u">
            <a href="#" class="nav-menu-button">Menu</a>

            <div class="nav-inner">
                <button id="btnUpdate" class="primary-button pure-button">Update</button>

                <div class="pure-menu pure-menu-open">
                    <ul>
                        <li><a href="#">Front page </a></li>
                        <li><a href="#">Archive<span class="email-count">(2)</span></a></li>
                        <li><a href="#">Users</a></li>
                        <li><a href="#">WatchWords</a></li>
                        <li><a href="#">Trash</a></li>
                        <li class="pure-menu-heading">Labels</li>
                        <li><a href="#"><span class="email-label-personal"></span>Personal</a></li>
                        <li><a href="#"><span class="email-label-work"></span>Work</a></li>
                        <li><a href="#"><span class="email-label-travel"></span>Travel</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="list" class="pure-u-1">
            <!--<div class="email-item email-item-selected pure-g">


                <div class="pure-u-3-4">
                    <h5 class="email-name">Author</h5>
                    <h4 class="email-subject">Title</h4>
                    <p class="email-desc">
                        Text
                    </p>
                </div>
            </div>-->
        </div>
        <script id="storyTemplate" type="text/x-jsrender">
            <div id={{>storyid}} class="email-item email-item-selected pure-g" onclick="clicked(this);">
                <div id="{{>hdnstoryid}}" style="display: none;">{{>storyurl}}</div>
                <div class="pure-u-3-4">
                    <h5 class="email-name">{{>author}}</h5>
                    <h4 class="email-subject">{{>title}}</h4>
                    <p class="email-desc">{{>text}}</p>
                </div>
            </div>
        </script>
            <div id="main" class="pure-u-1">
                <div class="email-content">
                    <!--<div class="email-content-header pure-g">
                        <div class="pure-u-1-2">
                            <h1 class="email-content-title">Hello from Toronto</h1>
                            <p class="email-content-subtitle">
                                From <a>Tilo Mitra</a> at <span>3:56pm, April 3, 2012</span>
                            </p>
                        </div>

                        <div class="email-content-controls pure-u-1-2">
                            <button id="btnReply" class="secondary-button pure-button">Reply</button>
                            <button class="secondary-button pure-button">Forward</button>
                            <button class="secondary-button pure-button">Move to</button>
                        </div>
                    </div>-->

                    <div class="email-content-body">
                        <div id="storyUrlDiv"></div>
                        <div id="commentsUrlDiv"></div>
                        <br/>
                        <div id="summaryDiv"></div>
                        <div id="jstree">
                            <!-- in this example the tree is populated from inline HTML -->
                            <ul>
                                <li>
                                    Root node 1
                                    <ul>
                                        <li id="child_node_1">Child node 1</li>
                                        <li>Child node 2</li>
                                    </ul>
                                </li>
                                <li>Root node 2</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <script src="http://yui.yahooapis.com/3.17.2/build/yui/yui-min.js"></script>

    <script>
        YUI().use('node-base', 'node-event-delegate', function (Y) {

            var menuButton = Y.one('.nav-menu-button'),
                nav        = Y.one('#nav');

            // Setting the active class name expands the menu vertically on small screens.
            menuButton.on('click', function (e) {
                nav.toggleClass('active');
            });

            // Your application code goes here...

        });
    </script>


    <script>
        (function (root) {
// -- Data --
            root.YUI_config = {"version":"3.17.2","base":"http:\u002F\u002Fyui.yahooapis.com\u002F3.17.2\u002F","comboBase":"http:\u002F\u002Fyui.yahooapis.com\u002Fcombo?","comboSep":"&","root":"3.17.2\u002F","filter":"min","logLevel":"error","combine":true,"patches":[],"maxURLLength":2048,"groups":{"vendor":{"combine":true,"comboBase":"\u002Fcombo\u002F1.17.30?","base":"\u002F","root":"\u002F","modules":{"css-mediaquery":{"path":"vendor\u002Fcss-mediaquery.js"},"handlebars-runtime":{"path":"vendor\u002Fhandlebars.runtime.js"}}},"app":{"combine":true,"comboBase":"\u002Fcombo\u002F1.17.30?","base":"\u002Fjs\u002F","root":"\u002Fjs\u002F"}}};
            root.app || (root.app = {});
            root.app.yui = {"use":function () { return this._bootstrap('use', [].slice.call(arguments)); },"require":function () { this._bootstrap('require', [].slice.call(arguments)); },"ready":function (callback) { this.use(function () { callback(); }); },"_bootstrap":function bootstrap(method, args) { var self = this, d = document, head = d.getElementsByTagName('head')[0], ie = /MSIE/.test(navigator.userAgent), callback = [], config = typeof YUI_config != "undefined" ? YUI_config : {}; function flush() { var l = callback.length, i; if (!self.YUI && typeof YUI == "undefined") { throw new Error("YUI was not injected correctly!"); } self.YUI = self.YUI || YUI; for (i = 0; i < l; i++) { callback.shift()(); } } function decrementRequestPending() { self._pending--; if (self._pending <= 0) { setTimeout(flush, 0); } else { load(); } } function createScriptNode(src) { var node = d.createElement('script'); if (node.async) { node.async = false; } if (ie) { node.onreadystatechange = function () { if (/loaded|complete/.test(this.readyState)) { this.onreadystatechange = null; decrementRequestPending(); } }; } else { node.onload = node.onerror = decrementRequestPending; } node.setAttribute('src', src); return node; } function load() { if (!config.seed) { throw new Error('YUI_config.seed array is required.'); } var seed = config.seed, l = seed.length, i, node; if (!self._injected) { self._injected = true; self._pending = seed.length; } for (i = 0; i < l; i++) { node = createScriptNode(seed.shift()); head.appendChild(node); if (node.async !== false) { break; } } } callback.push(function () { var i; if (!self._Y) { self.YUI.Env.core.push.apply(self.YUI.Env.core, config.extendedCore || []); self._Y = self.YUI(); self.use = self._Y.use; if (config.patches && config.patches.length) { for (i = 0; i < config.patches.length; i += 1) { config.patches[i](self._Y, self._Y.Env._loader); } } } self._Y[method].apply(self._Y, args); }); self.YUI = self.YUI || (typeof YUI != "undefined" ? YUI : null); if (!self.YUI && !self._injected) { load(); } else if (self._pending <= 0) { setTimeout(flush, 0); } return this; }};
            root.YUI_config || (root.YUI_config = {});
            root.YUI_config.seed = ["http:\u002F\u002Fyui.yahooapis.com\u002Fcombo?3.17.2\u002Fyui\u002Fyui-min.js"];
            root.YUI_config.groups || (root.YUI_config.groups = {});
            root.YUI_config.groups.app || (root.YUI_config.groups.app = {});
            root.YUI_config.groups.app.modules = {"start\u002Fapp":{"path":"start\u002Fapp.js","requires":["handlebars-runtime","yui","base-build","router","pjax-base","view","start\u002Fmodels\u002Fgrid","start\u002Fviews\u002Finput","start\u002Fviews\u002Foutput","start\u002Fviews\u002Fdownload"]},"start\u002Fmodels\u002Fgrid":{"path":"start\u002Fmodels\u002Fgrid.js","requires":["yui","querystring","base-build","model","model-sync-rest","start\u002Fmodels\u002Fmq"]},"start\u002Fmodels\u002Fmq":{"path":"start\u002Fmodels\u002Fmq.js","requires":["css-mediaquery","attribute","base-build","model","model-list"]},"start\u002Fviews\u002Fdownload":{"path":"start\u002Fviews\u002Fdownload.js","requires":["yui","base-build","querystring","view"]},"start\u002Fviews\u002Finput":{"path":"start\u002Fviews\u002Finput.js","requires":["base-build","start\u002Fmodels\u002Fmq","start\u002Fviews\u002Ftab"]},"start\u002Fviews\u002Foutput":{"path":"start\u002Fviews\u002Foutput.js","requires":["base-build","escape","start\u002Fviews\u002Ftab"]},"start\u002Fviews\u002Ftab":{"path":"start\u002Fviews\u002Ftab.js","requires":["yui","base-build","view"]}};
        }(this));
    </script>
    <script>
        app.yui.use('node-base', 'node-event-delegate', function (Y) {
            // This just makes sure that the href="#" attached to the <a> elements
            // don't scroll you back up the page.
            Y.one('body').delegate('click', function (e) {
                e.preventDefault();
            }, 'a[href="#"]');
        });
    </script>






</body>
</html>

